//+------------------------------------------------------------------+
//| Kinzi FBS Trading Bot (MT5)                                      |
//| Strategy: Moving Average Crossover                              |
//| Broker: FBS                                                     |
//+------------------------------------------------------------------+
#property copyright "Kinzi's Solutions"
#property version   "1.00"
#property strict

#include <Trade/Trade.mqh>
CTrade trade;

// === INPUT SETTINGS ===
input double LotSize = 0.01;
input int FastMAPeriod = 14;
input int SlowMAPeriod = 50;
input int StopLoss = 300;      // in points
input int TakeProfit = 600;    // in points

// === GLOBAL VARIABLES ===
double fastMA_current, fastMA_previous;
double slowMA_current, slowMA_previous;

//+------------------------------------------------------------------+
//| Expert initialization                                           |
//+------------------------------------------------------------------+
int OnInit()
{
   Print("Kinzi FBS EA Initialized Successfully");
   return(INIT_SUCCEEDED);
}

//+------------------------------------------------------------------+
//| Expert tick function                                            |
//+------------------------------------------------------------------+
void OnTick()
{
   // Get Moving Averages
   fastMA_current  = iMA(_Symbol, _Period, FastMAPeriod, 0, MODE_EMA, PRICE_CLOSE, 0);
   fastMA_previous = iMA(_Symbol, _Period, FastMAPeriod, 0, MODE_EMA, PRICE_CLOSE, 1);

   slowMA_current  = iMA(_Symbol, _Period, SlowMAPeriod, 0, MODE_EMA, PRICE_CLOSE, 0);
   slowMA_previous = iMA(_Symbol, _Period, SlowMAPeriod, 0, MODE_EMA, PRICE_CLOSE, 1);

   // Check if there is an open position
   if(PositionSelect(_Symbol)) return;

   // BUY CONDITION
   if(fastMA_previous < slowMA_previous && fastMA_current > slowMA_current)
   {
      trade.Buy(
         LotSize,
         _Symbol,
         Ask,
         Ask - StopLoss * _Point,
         Ask + TakeProfit * _Point,
         "Kinzi Buy Trade"
      );
   }

   // SELL CONDITION
   if(fastMA_previous > slowMA_previous && fastMA_current < slowMA_current)
   {
      trade.Sell(
         LotSize,
         _Symbol,
         Bid,
         Bid + StopLoss * _Point,
         Bid - TakeProfit * _Point,
         "Kinzi Sell Trade"
      );
   }
}
//+------------------------------------------------------------------+
